{% extends 'project_reports/base.html' %}

{% block title %}{{ display_term.verbose_name }} | {{ block.super }}{% endblock title %}

{% block intro %}
<h1>Project Reports</h1>
{% endblock intro %}

{% block content %}
{% with display_term_url_name=display_term.get_url_name %}
{% if terms  %}
{# TODO(giovanni): add functionality to change term with drop down #}
<select id="terms">
  {% for term in terms %}
  {% with term_url_name=term.get_url_name %}
  <option value="{{ term_url_name }}"{% ifequal term_url_name display_term_url_name  %} selected="selected"{% endifequal %}>{{ term.verbose_name}}</option>
  {% endwith term_url_name %}
  {% endfor %}
</select>
{% endif %}
{% endwith display_term_url_name %}
<a href="{% url 'project-reports:list-all' %}">List All</a>
{% if user.is_authenticated %}
| <a href="{% url 'project-reports:add' %}">Add New</a>
{% endif %}

<ul>
{% for project_report in project_reports %}
  <li>
    {# TODO(giovanni): add a href url links #}
    {# TODO(giovanni): ensure these CSS tags are implemented #}
    <a href="{% url 'project-reports:detail' project_report.pk %}">{{ project_report.title }}</a>
    {% if not project_report.complete %}
    <span class="warning">(Incomplete)</span>
    {% endif %}
    <div class="subtext">
      {{ project_report.date|date:"M d, Y" }}
      {# TODO(giovanni): have permissions checks here #}
      | <a href="{% url 'project-reports:edit' project_report.pk %}">Edit</a>
      | <a href="{% url 'project-reports:delete' project_report.pk %}">Delete</a>
      | {{ project_report.word_count }} Words
    </div>
  </li>
{% empty %}
<p>No project reports are available.</p>
{% endfor %}
</ul>
{% endblock content %}
